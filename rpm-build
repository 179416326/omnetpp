#! /bin/sh
#
# Script to build OMNeT++ to run in a place different from the build dir.
#

# make sure we're in the right directory
if [ ! -f configure ]; then
    echo "$0: must be started in the omnetpp directory" 1>&2
    exit 1
fi

# installation dir
export OMNETPP_INSTALL_ROOT="/usr/local/omnetpp-2.0"

# configure for build local & run in installation dir
cp rpm-build-cfg configure.user
if ! ./configure; then
    echo "$0: error during configuring for make" 1>&2
    exit 1
fi
if ! make; then
    echo "$0: error during make" 1>&2
    exit 1
fi

# reconfigure for final location (installation dir)
cp rpm-install-cfg configure.user
if ! ./configure; then
    echo "$0: error during configuring" 1>&2
    exit 1
fi

