%description:
Test "like" modules with typename ini file parameter

%file: test.ned

import testlib.Dump;

moduleinterface IFooModule
{
}

module Compound1 like IFooModule
{
}

module Compound2 like IFooModule
{
}

network Test
{
    parameters:
        volatile string typeName = intuniform(0, 1) == 0 ? "Compound1" : "Compound2";
    submodules:
        a: <> like IFooModule;
        b[2]: <> like IFooModule;
        c[10]: <typeName> like IFooModule;
        dump: Dump;
}

%exitcode: 0

%inifile: test.ini
[General]
debug-on-errors = true
network = Test
cmdenv-express-mode = false
Test.a.type-name = Compound1
Test.b[0].type-name = Compound2
Test.b[*].type-name = Compound1

%contains: stdout
module Test: Test {
    parameters:
        @isNetwork
        typeName = intuniform(0, 1) == 0 ? "Compound1" : "Compound2"
    submodules:
        module Test.a: Compound1 {
        }
        module Test.b[0]: Compound2 {
        }
        module Test.b[1]: Compound1 {
        }
        module Test.c[0]: Compound1 {
        }
        module Test.c[1]: Compound2 {
        }
        module Test.c[2]: Compound2 {
        }
        module Test.c[3]: Compound1 {
        }
        module Test.c[4]: Compound2 {
        }
        module Test.c[5]: Compound2 {
        }
        module Test.c[6]: Compound2 {
        }
        module Test.c[7]: Compound2 {
        }
        module Test.c[8]: Compound2 {
        }
        module Test.c[9]: Compound2 {
        }
}
