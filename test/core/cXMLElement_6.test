%description:
Check cXMLElement attribute handling

%file: {}.xml

<foo id="1">
    <foo id="2" color="red">one</foo>
    <bar id="3" color="red">
        <foo id="4">two</foo>
        <bar id="5">three</bar>
    </bar>
    <foo id="6">
        <bar id="7" color="red">four</bar>
        <bar id="8">five</bar>
        <bar id="9" color="yellow">
            <baz id="10" color="green" weight="heavy">six</baz>
        </bar>
    </foo>
    <bar id="11" color="green">
        <foo id="12">seven</foo>
        <bar id="13">eight</bar>
        <bar id="14">nine</bar>
    </bar>
    <bar id="15">ten</bar>
</foo>

%global:

static void printAttributes(const char *path)
{
    cXMLElement *node = ev.getXMLDocument("{}.xml", path);
    cXMLAttributeMap map = node->getAttributes();

    ev << path << ": ";
    ev << (node->hasAttributes() ? "has attrs" : "no attrs") << ",";
    for (cXMLAttributeMap::iterator i=map.begin(); i!=map.end(); i++)
        ev << " " << i->first << "=" << i->second << "/"
           << node->getAttribute(i->first.c_str());
    ev << ".\n";
}

%activity:

printAttributes("foo");
printAttributes("foo/foo");
printAttributes("foo//baz");

%contains: stdout
foo: 2 6.

