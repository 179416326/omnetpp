%description:
Test instantiating custom figure types from @figure.

%file: test.cc

#include <omnetpp.h>

using namespace omnetpp;

class FooFigure : public cGroupFigure { };
Register_Class(FooFigure);

namespace inet {

class BarFigure : public cGroupFigure { };
Register_Class(BarFigure);

namespace common {

class BazFigure : public cGroupFigure { };
Register_Class(BazFigure);

} // namespace common
} // namespace inet

namespace @TESTNAME@ {

class Test : public cSimpleModule {
public:
    void initialize() {
        cCanvas *canvas = getCanvas();
        for (int i = 0; i < canvas->getNumFigures(); i++)
            EV << canvas->getFigure(i)->getClassName() << endl;
        EV << "." << endl;
    }
};
Define_Module(Test);

} // namespace @TESTNAME@

%file: test.ned

simple Test
{
    @isNetwork(true);

    // without namespace
    @figure[01](type=foo);
    @figure[02](type=Foo);
    @figure[03](type=FooFigure);

    // with (nested) namespace
    @figure[04](type=inet::bar);
    @figure[05](type=inet::Bar);
    @figure[06](type=inet::BarFigure);
    @figure[07](type=inet::common::baz);
    @figure[08](type=inet::common::Baz);
    @figure[09](type=inet::common::BazFigure);

    // test caching of lookup results
    @figure[dup1](type=foo);

}

%contains: stdout
omnetpp::cGroupFigure
FooFigure
FooFigure
FooFigure
inet::BarFigure
inet::BarFigure
inet::BarFigure
inet::common::BazFigure
inet::common::BazFigure
inet::common::BazFigure
FooFigure
.
