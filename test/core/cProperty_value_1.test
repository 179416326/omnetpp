%description:
Tests cProperty keys and values

%global:
#include <string.h>
#define PRINTINFO     ev << prop->info() << "\n";
#define PRINTKEY(k)   ev << "key(" << k << "): has=" << (prop->hasKey(k)?"1":"0") << " len=" << prop->numValues(k) << "\n";

%activity:
//__asm int 3;
cProperty *prop;
prop = new cProperty("foo"); PRINTINFO;

prop->addKey(""); PRINTINFO;
PRINTKEY("");
prop->setValue("", 2, "zwei"); PRINTINFO;
prop->setValue("", 4, "vier"); PRINTINFO;
PRINTKEY("");

prop->addKey("fookey"); PRINTINFO;
prop->setValue("fookey", 1, "eins"); PRINTINFO;
prop->setValue("fookey", 0, "zero"); PRINTINFO;
prop->setValue("fookey", 2, NULL); PRINTINFO;
prop->addKey("barkey"); PRINTINFO;
prop->addKey("bazkey"); PRINTINFO;

prop->setNumValues("fookey", 10); PRINTINFO;
prop->setNumValues("fookey", 2); PRINTINFO;
prop->setValue("fookey", 9, "neun"); PRINTINFO;

PRINTKEY("");
PRINTKEY("fookey");
PRINTKEY("bazkey");
PRINTKEY("nope");
PRINTKEY(NULL);

prop->erase("barkey"); PRINTINFO;
prop->erase("fookey"); PRINTINFO;
prop->erase(""); PRINTINFO;

PRINTKEY("");
PRINTKEY("fookey");
PRINTKEY("bazkey");
PRINTKEY("nope");

prop->setValue("fookey", 3, "drei"); PRINTINFO;

PRINTKEY("fookey");

delete prop;

ev << "." << endl;

%contains: stdout
@foo
@foo()
@foo(,,zwei)
@foo(,,zwei,,vier)
@foo(,,zwei,,vier;fookey=)
@foo(,,zwei,,vier;fookey=,eins)
@foo(,,zwei,,vier;fookey=zero,eins)
@foo(,,zwei,,vier;fookey=zero,eins,)
@foo(,,zwei,,vier;fookey=zero,eins,;barkey=)
@foo(,,zwei,,vier;fookey=zero,eins,;barkey=;bazkey=)
@foo(,,zwei,,vier;fookey=zero,eins,,,,,,,,;barkey=;bazkey=)
@foo(,,zwei,,vier;fookey=zero,eins;barkey=;bazkey=)
@foo(,,zwei,,vier;fookey=zero,eins,,,,,,,,neun;barkey=;bazkey=)
.
