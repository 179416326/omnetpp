%description:
check that cQueue::operator=() preserves order

%module: {Queues}

class {Queues} : public cSimpleModule
{
    Module_Class_Members({Queues}, cSimpleModule, 16384);
    virtual void activity();
    void fillQueue(cQueue& q);
    void output(cQueue& q, char *prefix);
};

Define_Module({Queues});

void {Queues}::fillQueue(cQueue& q)
{
  cMsgPar *parm = NULL;
  parm = new cMsgPar("1");
  q.insert(parm);
  parm = new cMsgPar("3");
  q.insert(parm);
  parm = new cMsgPar("2");
  q.insert(parm);
}

void {Queues}::output(cQueue& q, char* prefix)
{
  ev << prefix << " " << q.name() << ":";
  while (!q.empty())
    ev << " " << q.pop()->name();
  ev << endl;
}

void {Queues}::activity()
{
  cQueue initial("Initial");
  cQueue duplicate("Duplicate");

  fillQueue(initial);
  duplicate = initial;
  output(initial, "Unsorted");
  output(duplicate, "Unsorted");

  initial.clear();
  duplicate.clear();
}

%contains: stdout
Unsorted Initial: 1 3 2
Unsorted Duplicate: 1 3 2

