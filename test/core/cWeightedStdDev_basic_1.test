%description:
Basic cWeightedStdDev test: for integer weights it should
yield the same results as cStdDev with collect() called
those many times.

%global:
void print(cStdDev& s)
{
    ev << "n=" << s.count() << " w=" << s.weights()
       << " sum=" << s.sum() << " sqrsum=" << s.sqrSum()
       << " min=" << s.min() << " max=" << s.max()
       << " mean=" << s.mean() << " stddev=" << s.stddev()
       << " var=" << s.variance() << endl;
}

%activity:

cStdDev s;
cWeightedStdDev ws;

for (int i=0; i<100; i++)
{
    double d = dblrand() - 0.2;
    int weight = intuniform(0,5);
    for (int j=0; j<weight; j++) s.collect(d);
    ws.collect2(d, weight);
}

print(s);
print(ws);
ev << "." << endl;

%contains-regex: stdout
n=235 w=235 sum=84.2969 sqrsum=48.135 min=-0.190643 max=0.788374 mean=0.35871 stddev=0.276554 var=0.0764823
n=80 w=235 sum=29.126 sqrsum=16.7866 min=-0.190643 max=0.788374 mean=0.35871 stddev=0.278055 var=0.0773147
.
