#
# Definitions to be customized by 'configure'
#
CXX=@CXX@
AR=@AR@
MAKE_SO=@MAKE_SO@

OMNETPP_ROOT=@OMNETPP_ROOT@
OMNETPP_SRC_DIR=@OMNETPP_SRC_DIR@
OMNETPP_INCL_PATH=@OMNETPP_INCL_PATH@

USE_DLOPEN=@USE_DLOPEN@

LIB_SUFFIX=@LIB_SUFFIX@

CFLAGS=@CFLAGS@

#
# Local definitions
#
COPTS=$(CLFAGS) $(OMNETPP_INCL_PATH)

OBJS=args.o cenvir.o cinifile.o main.o omnetapp.o slaveapp.o seeds.o patmatch.o

#
# Targets
#
all : libenvir.$(LIB_SUFFIX)

libenvir.a : $(OBJS)
	$(AR) libenvir.a $(OBJS)

libenvir.so : $(OBJS)
	$(MAKE_SO) libenvir.so $(OBJS)

args.o : args.cc args.h
	$(CXX) -c $(COPTS) args.cc

cenvir.o : cenvir.cc
	$(CXX) -c $(COPTS) cenvir.cc

cinifile.o : cinifile.cc
	$(CXX) -c $(COPTS) cinifile.cc

main.o : main.cc
	$(CXX) -c $(COPTS) main.cc

omnetapp.o : omnetapp.cc
	$(CXX) -c $(COPTS) -DDYNAMIC_LINKAGE=$(DYNAMIC_LINKAGE) omnetapp.cc

slaveapp.o : slaveapp.cc
	$(CXX) -c $(COPTS) slaveapp.cc

seeds.o : seeds.cc
	$(CXX) -c $(COPTS) seeds.cc

patmatch.o : patmatch.cc
	$(CXX) -c $(COPTS) patmatch.cc

depend:
	makedepend -Y -I. -I../sim -- *.cc

clean:
	rm -f *.o libenvir.a libenvir.so


# DO NOT DELETE THIS LINE -- make depend depends on it.


