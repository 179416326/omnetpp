# Definitions to be customized by 'configure'
CXX=@CXX@
AS=gcc -g -c
AR=@AR@
MAKE_SO=@MAKE_SO@

OMNETPP_ROOT=@OMNETPP_ROOT@
OMNETPP_SRC_DIR=@OMNETPP_SRC_DIR@
OMNETPP_INCL_PATH=@OMNETPP_INCL_PATH@
OMNETPP_INCLUDES=@OMNETPP_INCLUDES@
USE_DLOPEN=1
LIB_SUFFIX=so

# Local definitions
ENVIR_INCLUDES=args.h cinifile.h omnetapp.h slaveapp.h patmatch.h
OBJS=args.o cenvir.o cinifile.o main.o omnetapp.o slaveapp.o seeds.o patmatch.o

all : libenvir.$(LIB_SUFFIX)

libenvir.a : $(OBJS)
	$(AR) libenvir.a $(OBJS)

libenvir.so : $(OBJS)
	$(MAKE_SO) libenvir.so $(OBJS)

args.o : args.cc args.h
	$(CXX) $(OMNETPP_INCL_PATH) args.cc


cenvir.o : cenvir.cc $(OMNETPP_INCLUDES) $(ENVIR_INCLUDES)
	$(CXX) $(OMNETPP_INCL_PATH) cenvir.cc

cinifile.o : cinifile.cc  $(OMNETPP_INCLUDES) $(ENVIR_INCLUDES)
	$(CXX) $(OMNETPP_INCL_PATH) cinifile.cc

main.o : main.cc  $(OMNETPP_INCLUDES) $(ENVIR_INCLUDES)
	$(CXX) $(OMNETPP_INCL_PATH) main.cc

omnetapp.o : omnetapp.cc  $(OMNETPP_INCLUDES) $(ENVIR_INCLUDES)
	$(CXX) $(OMNETPP_INCL_PATH) -DDYNAMIC_LINKAGE=$(DYNAMIC_LINKAGE) omnetapp.cc

slaveapp.o : slaveapp.cc  $(OMNETPP_INCLUDES) $(ENVIR_INCLUDES)
	$(CXX) $(OMNETPP_INCL_PATH) slaveapp.cc

seeds.o : seeds.cc  $(OMNETPP_INCLUDES) $(ENVIR_INCLUDES)
	$(CXX) $(OMNETPP_INCL_PATH) seeds.cc

patmatch.o : patmatch.cc  $(OMNETPP_INCLUDES) $(ENVIR_INCLUDES)
	$(CXX) $(OMNETPP_INCL_PATH) patmatch.cc

