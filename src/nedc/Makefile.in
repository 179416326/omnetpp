#
# Definitions to be customized by configure
#
CXX=@CXX@
CC=@CC@
YACC=@YACC@
LEX=@LEX@

CFLAGS=@CFLAGS@
LDFLAGS=@LDFLAGS@

#
# Local definitions
#
COPTS=$(CFLAGS)

OBJS=ebnf.tab.o lex.yy.o jar.o jar_lib.o jar_mod.o jar_expr.o jar_mem.o

#
# Targets
#
nedc: $(OBJS)
	$(CC) $(LDFLAGS) $(OBJS) -o nedc

lex.yy.o: jar_func.h lex.yy.c
	$(CXX) -c $(COPTS) lex.yy.c

ebnf.tab.o: jar_func.h ebnf.tab.h ebnf.tab.c
	$(CXX) -c $(COPTS) ebnf.tab.c

ebnf.tab.h: ebnf.y
	$(YACC) -b ebnf -d ebnf.y

ebnf.tab.c: ebnf.y
	$(YACC) -b ebnf -d ebnf.y

lex.yy.c: ebnf.lex
	$(LEX) ebnf.lex

jar.o: jar_lib.h jar_func.h jar.c
	$(CXX) -c $(COPTS) jar.c

jar_lib.o: jar_lib.h jar_func.h jar_lib.c
	$(CXX) -c $(COPTS) jar_lib.c

jar_mod.o: jar_lib.h jar_func.h jar_mod.c
	$(CXX) -c $(COPTS) jar_mod.c

jar_expr.o: jar_lib.h jar_func.h jar_expr.c
	$(CXX) -c $(COPTS) jar_expr.c

jar_mem.o: jar_func.h jar_mem.c
	$(CXX) -c $(COPTS) jar_mem.c

depend:
	makedepend -Y -I. -- *.c
	makedepend -Y -I. -fmakefile.in -- *.c

clean:
	rm -f *.o lex.yy.c ebnf.tab.c ebnf.tab.h nedc *_n.cc


# DO NOT DELETE THIS LINE -- make depend depends on it.

ebnf.tab.o: ebnfcfg.h jar_func.h
jar.o: jar_func.h jar_lib.h
jar_expr.o: jar_func.h jar_lib.h
jar_lib.o: jar_func.h jar_lib.h
jar_mem.o: jar_func.h
jar_mod.o: jar_func.h jar_lib.h
lex.yy.o: ebnf.tab.h
