# Definitions to be customized by 'configure'
CXX=@CXX@
LD=@LD@
YACC=@YACC@
LEX=@LEX@

CFLAGS=@CFLAGS@

OMNETPP_ROOT=@OMNETPP_ROOT@
OMNETPP_SRC_DIR=@OMNETPP_SRC_DIR@
OMNETPP_BITMAP_PATH=@OMNETPP_BITMAP_PATH@

TK_INCL_PATH=@TK_INCL_PATH@
TK_LIBS=@TK_LIBS@
SYS_LIBS=@SYS_LIBS@

GNED_INCLUDES=arrow.h parsened.h tklib.h

COPTS=-fwritable-strings $(CFLAGS) $(TK_INCL_PATH)

OMNETPP_GNED_DIR=$(OMNETPP_SRC_DIR)/gned

OBJS = gned.o tklib.o arrow.o ebnf.tab.o lex.yy.o parsened.o disp.o nedfile.o

gned : $(OBJS)
	$(LD) $(OBJS) $(TK_LIBS) $(SYS_LIBS) -o gned

gned.o : gned.cc $(INCLUDES)
	$(CXX) -c $(COPTS) -DOMNETPP_GNED_DIR=\"$(OMNETPP_GNED_DIR)\" -DOMNETPP_BITMAP_PATH=\"$(OMNETPP_BITMAP_PATH)\" gned.cc

tklib.o : tklib.cc $(INCLUDES)
	$(CXX) -c $(COPTS) tklib.cc

arrow.o: arrow.cc arrow.h
	$(CXX) -c $(COPTS) arrow.cc

parsened.o: parsened.cc parsened.h disp.h
	$(CXX) -c $(COPTS) parsened.cc

nedfile.o: nedfile.cc nedfile.h
	$(CXX) -c $(COPTS) nedfile.cc

disp.o: disp.h disp.cc
	$(CXX) -c $(COPTS) disp.cc

lex.yy.o: parsened.h lex.yy.c
	$(CXX) -c $(COPTS) lex.yy.c

ebnf.tab.o: parsened.h ebnf.tab.h ebnf.tab.c
	$(CXX) -c $(COPTS) ebnf.tab.c

ebnf.tab.h: ebnf.y
	$(YACC) -b ebnf -d ebnf.y

ebnf.tab.c: ebnf.y
	$(YACC) -b ebnf -d ebnf.y

lex.yy.c: ebnf.lex
	$(LEX) ebnf.lex

