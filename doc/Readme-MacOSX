Installing OMNeT++ on Mac OS X
==============================

1. Installing OMNeT++

Download the OMNeT++ source code and documentation from http://omnetpp.org.
Make sure you select to download the generic archive, omnetpp-<version>-src.tgz.

Copy the archive to the directory where you want to install it. This is usually
your home directory, /Users/<you>. Open a terminal, and extract the archive
using the command:

    tar zxvf omnetpp-<version>-src.tgz

A subdirectory called omnetpp-<version> will be created, containing the simulator
files. You should now add the following lines to your startup file (.bashrc
or .bash_profile if you are using bash; .profile if you're using some other
sh-like shell):

    export PATH=$PATH:~/omnetpp/bin

You will need to restart the shell (close and re-open) before proceeding.

Check configure.user to make sure it contains the settings you need.
In most cases you don't need to change anything in it.

NOTE: If you want to build 64-bit binaries, you should add the -m64 option to
the CFLAGS_RELEASE, CFLAGS_DEBUG and LDFLAGS variables in configure.user.
Set NO_TCL=yes in configure.user too, because Tcl/Tk does not have a 64-bit
version. You will not be able to use Tkenv, the graphical simulation runtime; 
simulations will run using the command line environment, Cmdenv.
      
For Mac OS X 10.5:
 
    1. Install XCode 3 on your machine 
    2. ./configure 
    3. make 
 
For Mac OS X 10.4:

    1. Install XCode 2.5 on your machine 
    2. Install fink on your machine (install required packages: at least  
       bison 2.x must be present on your system) (XCode 2.x comes with bison 1.x) 
    3. The default gcc 4.0.1 compiler will not work. Either upgrade to 4.2, or 
       switch back to the 3.3 version (sudo gcc_select 3.3)
    4. ./configure 
    5. make
      
This will create both debug and release binaries.

You should now test all samples and check they run correctly. As an example,
the dyna example is started by entering the following commands:

    cd samples/dyna
    ./dyna

By default the samples will run using the Tcl/Tk environment. You should see
nice gui windows and dialogs.


2. Starting the IDE

OMNeT++ 4.0 comes with a brand new IDE (based on Eclipse). Mac OS X already has Java 5
installed so you should be ok. You should be able to start the IDE by typing:

    omnetpp

NOTE: The IDE is supported ONLY on the following platforms:
 - Windows 32bit
 - Linux 32/64bit (i386)
 - Mac OS X 10.4/5 (i386/ppc)


3. Reconfiguring the libraries

If you need to recompile the OMNeT++ components with different flags (e.g.
different optimization), then change to the top-level omnetpp directory, edit
configure.user accordingly, then say:

    ./configure
    make clean
    make

If you want to recompile just a single library, then change to the directory
of the library (e.g. cd src/sim) and type:

    make clean
    make

By default, libraries are compiled in both debug and release mode. If you want
to make release or debug builds only, use:
   
    make MODE=release
    
or
    
    make MODE=debug

By default, shared libraries will be created. If you want to build static
libraries, use:

    make SHARED_LIBS=no

The built libraries and programs are immediately copied
to the `lib/` and `bin/` subdirectories.

4. Notes

The Tcl/Tk environment is using the native Aqua version of Tcl/Tk, so you 
will see native widgets. However, due to problems in the Tk/Aqua port,
you may experience focus problems and other UI quirks. We are aware
of these problems, but have not found a workaround yet.

