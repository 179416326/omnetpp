PVMEX
=====

A distributed sender-receiver example. The sender and receiver modules
execute on different hosts and communicate via PVM.
(Parallel Virtual Machine, see http://www.epm.ornl.gov/pvm/pvm_home.html)

Look at the `machines:' and `on:' stuff in the NED file and the syncpoint()
calls in the sender part.

To try
~~~~~~
PVM3.3 needs to be installed on the machines you want to use. To avoid having
to copy files to other hosts again and again, it is recommended to have a
common shared file system on all hosts (e.g.through NFS).

First, rebuild `pvmex' with PVM support enabled in the makefile. Then make
sure that `distributed=yes' is set in omnetpp.ini and the [Machines] section
contains the PVM names of your hosts. The [Slaves] section configures
the OMNeT++ tasks that are started up on remote hosts through PVM;
it is recommended to set `write-slavelog=yes'. If you have separate
file systems on all hosts, copy the executable and omnetp.ini to the
other hosts.

Create a pvmhosts file, setting the program directory (??=) and the
working directory (wd=) for each host to the directory where pvmex and
omnetpp.ini are. Restart pvm with the new pvmhosts file (halt, then
`pvm pvmhosts').

Now if you start `pvmex' on one of the hosts, it should start up the other
executable and wow... After some pain, it should all work. It *does* work
for us!

If it doesn't work
~~~~~~~~~~~~~~~~~~
If you get the 'cannot join omnetpp_group' message then you probably have to
start the PVM group server (pvmgs) by hand.
Otherwise, look at the `slave.log' file; it is written by the background
OMNeT++ processes.

NOTE: you have to give *different* host names in the [Machines] section of the
ini file to actually get distributed execution. If you specify the same host
name, the two simple modules will be executed in an ordinary (non-distributed)
OMNeT++ process.
BUT: if you want to try distributed execution on a single host, enable the
SINGLE_HOST define in sim/pvm/pvmmod.cc. This will make OMNeT++ start up
the background processes on the local host despite that other host names are
given in the ini file.

Good luck!
